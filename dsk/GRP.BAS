10 KEYOFF:COLOR 15,1,1:SCREEN 2,2:VDP(7)=(VDP(7) AND &HFC) OR 4:POKE &HF3EB,4:DEFINT A-Z

200 ' CLEAR OUT BOTTOM THIRD
200 Y=BASE(10)+512:FOR I=0 TO 255:VPOKE Y+I,32:NEXT
210 ' DO FIXES REGARDING CURSOR FOR INPUT COMMAND
210 VPOKE BASE(10)+255,254:VPOKE BASE(10)+511,254

310 ' LOAD AND COPY CHARACTER SET FROM FILE TO LOWER SCREEN THIRD AND SET COLOR
310 ' FONT FROM CHARACTER 32
310 X=&HC000:BLOAD"FONT.BIN",X
320 Y=BASE(12)+4096+32*8:Z=BASE(11)+4096+32*8
330 FOR I=0 TO 767:VPOKE Y+I,PEEK (X+I):VPOKE Z+I,&H1F:NEXT

410 ' DEFINE CHARACTER 0 - LEFT GRID
410 Y=BASE(12)+4096:RESTORE 60340
420 FOR I=0 TO 7:READ A: VPOKE Y+I,A:NEXT
440 ' DEFINE CHARACTER 31 - RIGHT GRID
440 Y=BASE(12)+4096+31*8
450 FOR I=0 TO 7:READ A: VPOKE Y+I,A:NEXT
470 ' DRAW GRID
470 Y=BASE(10)+512
480 FOR I=0 TO 7:VPOKE Y+I*32,0:VPOKE Y+I*32+31,31:NEXT
500 ' COLOR GRID
500 Z=BASE(11)+4096
510 FOR I=0 TO 7:VPOKE Z+I,&H1E:VPOKE Z+I+248,&H1E:NEXT

710 ' DEFINE ACTION BUTTONS
710 RESTORE 60020
720 BN=6:K=255-4*BN:Y=BASE(12)+4096+8*K:Z=BASE(11)+4096+8*K
730 FOR I=0 TO BN*32-1:READ A:VPOKE Y+I,A:VPOKE Z+I,&H1E:NEXT
750 'DEFINE CHARACTER 1-4 - UPPER AND LOWER SEPARATORS AND FILLERS
750 Y=BASE(12)+4096+8:Z=BASE(11)+4096+8:RESTORE 63000
760 FOR I=0 TO 31:READ A: VPOKE Y+I,A:VPOKE Z+I,&H1E:NEXT
770 Y=BASE(10)+513
780 FOR L=0 TO BN-1:FOR J=0 TO 1:FOR I=0 TO 1
790 VPOKE Y+J+I*32,K:K=K+1
800 NEXT I:NEXT J
810 VPOKE Y+2,1:VPOKE Y+34,2:Y=Y+3:NEXT L
820 FOR I=0 TO 29-BN*3:VPOKE Y,3:VPOKE Y+32,4:Y=Y+1:NEXT

910 'DRAW SEA AND ISLANDS
910 LINE (0,0)-(255,127),4,BF
920 GOSUB 40000

930 'HIDE ALL SPRITES
930 Y=BASE(13):FOR I=0 TO 31:VPOKE Y+I*4,&HD1:NEXT

950 'LOAD SPRITES
950 I=0:RESTORE 60500:GOSUB 53000

5000 GOSUB 52000
5010 VPOKE BASE(11)+1,&HF4:VPOKE BASE(11)+2049,&HF4

10000 A$=INKEY$:IF A$="" THEN 10000
10010 BSAVE"GRP.SC2",0,&H3FFF,S
10020 SCREEN 0:END

40000 ' DRAW TOP ISLAND
40000 PRESET (15,12)
40020 DRAW "C10 R15U1R4U2R23U1R55D1R8D2R7D1R10D2R17U1R6D1R3D1R3D3L1D2L2D1L19D2L7D1L3D2L1D1L5D1L3D1L1D1L1D1L2D2L1D1L2D1L3D2L16D1L3D1L1D1L5D1L49D1L12U1L3U1L3U2L14U3L2U1L1U3L2U5L1U3R2U2R1U2R2U1R1U2R2U1R4U2"
40030 PAINT (16,13),10,10
40040 PRESET (9,38)
40050 DRAW "C6 R14D2R2BD1BR4BD1R12BU1BR1R48BU1BR1R4BU1BR1U1R3BU1BR1R15BR4BU3R1U1R1BR5BU5R2U1R5BR2BU2R2BU1BR1R6U2R19"
40070 ' DRAW MIDDLE ISLAND
40070 PRESET (76,69)
40080 DRAW "C10 R2U4R3U1R1U1R4U1R7U1R1U1R3U1R3U1R1U1R1U1R15U1R3U1R1U1R5U1R5U1R1U1R5U1R82D1R1D2R2D1R6D2R17D1R3D1R1D2R2D1R1D3R3D5L1D4L2D2L1D1L4D1L19U1L22D2L5D1L6D1L1D1L7D1L21U2L6U1L1U1L15D1L3D1L1D2L13U1L1U1L16U1L11U2L4U1L11U1L5U2L3U1L1U1L1"
40090 PAINT (82,67),10,10
40100 PRESET (79,74)
40110 DRAW "C6 R4BR1BD1R10BR1BD1R3BR1BD2R10BR1BD1R15BR1BD1R1D1R13BR20BU2R5BR1BD2R21BR1BU1R6BR2BU2R5U1R5BR1BU2R21D1R19BR1BU1R3"
40130 ' DRAW BOTTOM ISLAND
40130 PRESET (7,95)
40140 DRAW "C10 R9U1R6U1R4U1R4U1R4U2R8U1R8D1R28D1R15U1R6F2R13F2R4F1R9F1R6F1R9D3R1F1D2R1G1L2D7G1L5D1L7D1L2D1L5D1L9U1L4U2L7D1L2D1L3D1G1D1L2D1L2D1L3D1L2D1L5D1L16U1L5U1L8U1L18U1L4U1L2U1L20G1L8H2U4E1U1E1R2U1E1U3L1U2L1U2L1U1E1U1"
40150 PAINT (9,97),10,10
40160 PRESET (5,117)
40170 DRAW "C6 R8E1R19BR3BD2R3F1R17F1R7F1R5D1R16E1R4BR4BU2R1BR7BU5R1BR3BU2R5BR5BD3R9E1R4BR3BU2R6E1R4"
40990 RETURN

52000 ' SEA TILES
52000 RESTORE 52100
52020 X=BASE(10)
52030 READ A:IF A=-1 THEN RETURN
52040 VPOKE X+A,0
52050 GOTO 52030
52100 DATA 8,17,26,62,88,115,122,144,150,156,161,175,184,196,204,226,231
52110 DATA 263,290,296,325,334,339,348,373,381,407,411,435,440,447,469,477,493,500,507,-1

53000 'LOAD SPRITE DEFINITIONS, I=BEGIN SPRITE
53000 S=BASE(9)+I*32
53020 READ A
53030 IF A=-1 THEN RETURN
53040 VPOKE S,A
53050 S=S+1
53060 IF (S MOD 32)=0 THEN PRINT ".";
53070 GOTO 53020

60020 ' --- factory
60020 DATA 255,0,48,48,49,51,63,63,50,53,55,55,63,0,255,0,255,0,0,0,36,108,252,252,124,124,124,124,252,0,255,0
60060 ' --- rocket
60060 DATA 255,0,0,0,0,1,3,7,31,39,10,18,4,0,255,0,255,0,0,112,240,176,96,192,128,28,20,28,20,0,255,0
60100 ' --- Launch
60100 DATA 255,0,7,8,19,39,47,47,47,39,19,8,7,0,255,0,255,0,192,32,144,200,232,232,232,200,148,36,198,0,255,0
60140 ' --- satellite
60140 DATA 255,0,0,0,0,0,0,1,5,14,27,54,28,8,255,0,255,0,16,56,108,216,112,160,128,12,10,10,12,0,255,0
60200 ' --- propaganda
60200 DATA 255,9,37,16,9,67,55,3,49,69,9,17,3,3,255,0,255,32,72,16,32,132,216,128,16,70,37,6,132,128,255,0
60240 ' info
60250 DATA 255,0,63,0,47,0,57,0,55,0,47,0,43,0,255,0,255,0,240,0,240,0,240,0,48,7,242,2,247,0,255,0

60340 ' --- grid
60340 DATA 254,130,162,130,130,130,138,130,127,65,81,65,65,65,69,65

60500 'city sprites
60500 ' --- city large
60500 ' color 1
60500 DATA 252,252,181,253,173,253,181,253,213,253,253,253,0,0,0,0,15,11,239,235,109,239,171,239,237,239,239,239,0,0,0,0
60570 ' color 7
60570 DATA 0,0,72,0,80,0,72,0,40,0,0,0,0,0,0,0,0,4,0,4,130,0,68,0,2,0,0,0,0,0,0,0
60620 ' --- city medium
60620 ' color 1
60620 DATA 0,1,2,7,3,18,58,84,254,124,76,76,0,0,0,0,128,192,160,240,224,104,92,62,107,62,38,38,0,0,0,0
60680 ' color 15
60680 DATA 0,0,1,0,0,1,1,40,0,0,48,48,0,0,0,0,0,0,64,0,0,128,128,0,20,0,24,24,0,0,0,0
60730 ' --- city small
60730 ' color 1
60730 DATA 0,0,0,16,56,108,198,0,9,28,54,99,0,0,0,0,8,28,54,99,0,32,112,216,140,0,0,0,0,0,0,0
60790 ' color 15
60790 DATA 0,0,0,0,0,16,56,0,0,0,8,28,0,0,0,0,0,0,8,28,0,0,0,32,112,0,0,0,0,0,0,0
60840 ' --- city rubble
60840 ' color 1
60840 DATA 0,0,0,0,0,1,62,105,50,31,0,0,0,0,0,0,0,0,0,0,0,224,220,43,254,128,0,0,0,0,0,0
60900 ' color 9
60900 DATA 0,0,0,0,0,0,0,6,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,212,0,0,0,0,0,0,0,0
60950 ' --- missile
60950 ' color 1
60950 DATA 0,1,1,9,9,9,9,9,9,9,10,31,0,0,0,0,128,192,192,64,192,192,64,64,220,220,180,252,0,0,0,0
61010 ' color 15
61010 DATA 0,0,0,0,6,0,0,0,0,0,1,0,0,0,0,0,0,0,0,128,0,0,128,128,0,8,72,0,0,0,0,0
61060 ' --- defense satellite
61060 ' color 1
61060 DATA 28,22,27,14,5,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,160,112,216,104,56,0,0,0,0,0,0
61120 ' color 6
61120 DATA 0,8,4,0,0,0,2,4,8,16,32,64,0,0,0,0,8,16,32,64,0,0,0,32,16,0,0,0,0,0,0,0
61170 ' --- propaganda active
61170 ' color 1
61170 DATA 0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
61230 ' color 15
61230 DATA 7,8,19,36,43,42,20,8,6,0,0,0,0,0,0,0,192,32,144,72,168,168,80,32,192,0,0,0,0,0,0,0
61280 ' --- factory active
61280 ' color 1
61280 DATA 0,48,48,49,51,63,51,51,63,63,63,63,0,0,0,0,0,0,0,36,108,252,108,252,252,252,252,252,0,0,0,0
61340 ' color 14
61340 DATA 56,1,1,0,0,0,12,12,0,0,0,0,0,0,0,0,219,182,36,0,0,0,144,0,0,0,0,0,0,0,0,0
61390 ' --- missile up
61390 ' color 1
61390 DATA 0,1,2,2,2,2,2,2,2,2,2,5,11,4,0,0,128,64,32,32,160,160,32,32,32,32,160,80,104,144,0,0
61450 ' color 15
61450 DATA 0,0,1,1,1,1,1,1,1,1,1,2,4,0,0,0,0,128,192,192,64,64,192,192,192,192,64,160,144,0,0,0
61500 ' --- missile down
61500 ' color 1
61500 DATA 4,11,5,2,2,2,2,2,2,2,2,2,1,0,0,0,144,104,80,160,32,32,32,32,160,160,32,32,64,128,0,0
61560 ' color 15
61560 DATA 0,4,2,1,1,1,1,1,1,1,1,1,0,0,0,0,0,144,160,64,192,192,192,192,64,64,192,192,128,0,0,0
61610 ' --- missile left
61610 ' color 1
61610 DATA 0,0,0,0,0,0,31,32,70,32,31,0,0,0,0,0,0,0,0,0,4,10,244,12,18,12,244,10,4,0,0,0
61670 ' color 15
61670 DATA 0,0,0,0,0,0,0,31,57,31,0,0,0,0,0,0,0,0,0,0,0,4,8,240,236,240,8,4,0,0,0,0
61720 ' --- missile right
61720 ' color 1
61720 DATA 0,0,0,0,32,80,47,48,72,48,47,80,32,0,0,0,0,0,0,0,0,0,248,4,98,4,248,0,0,0,0,0
61780 ' color 15
61780 DATA 0,0,0,0,0,32,16,15,55,15,16,32,0,0,0,0,0,0,0,0,0,0,0,248,156,248,0,0,0,0,0,0
61830 ' --- explosion 1
61830 ' color 6
61830 DATA 0,0,0,0,0,0,0,0,0,0,0,0,3,7,7,3,0,0,0,0,0,0,0,0,0,0,0,0,224,240,240,224
61890 ' --- explosion 2
61890 ' color 6
61890 DATA 0,0,0,0,0,0,0,0,1,3,7,12,11,7,31,31,0,0,0,0,0,0,0,0,192,224,240,152,232,240,252,252
61950 ' --- explosion 3
61950 ' color 6
61950 DATA 0,0,0,0,7,15,31,26,13,7,7,12,9,1,15,127,0,0,0,0,248,252,254,242,206,248,240,152,200,192,248,254
62010 ' --- explosion 4
62010 ' color 6
62010 DATA 0,15,31,127,127,255,255,127,31,7,4,12,9,1,15,255,0,248,254,254,255,255,255,255,255,250,144,152,200,192,248,255
62020 ' --- riots
62020 ' color 1
62020 DATA 13,18,114,142,129,128,136,71,64,64,32,16,16,8,15,0,176,76,74,73,73,201,183,1,1,1,2,2,2,4,252,0
62030 ' color 15
62030 DATA 0,13,13,113,126,127,119,56,63,63,31,15,15,7,0,0,0,176,180,182,182,54,72,254,254,254,252,252,252,248,0,0
62070 DATA -1

63000 ' action separator
63000 DATA 255,16,16,16,16,16,16,16
63020 DATA 16,16,16,16,16,16,255,0
63030 ' action filler
63030 DATA 255,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0